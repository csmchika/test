Index.php - форма, которая отправляет данные POST - запросом в test.php
test.php - с помощью try начинаем функцию task1, дальше по пунктам:
1) dbconnect - подключение к БД, $data - то, что передал пользователь в форме
2) createBarcode - создает рандомное число, проверяет, чтобы его не было в общей таблице баркодов - отправляет в CheckFirstAPI
3) Передаем нужные части из $data с помощью cURL на API, возвращаем True, если ответ положительный сохраняем в таблицу barcodes (просто, чтобы была общая таблица, и на тот момент как тест вместо API), если error, то заново генерируем, потом отправляем на проверку только barcode в CheckSecondAPI, по аналогии с первым API
4) Я думал создать отдельную базу events, ведь по сути у них одна дата и цены для взрослых и детей, а потом финальную таблицу чисто джойнами сделать, но решил, что не нужно)
5) Поэтому просто полное сохранение в orders с помощью параметров
6) Со 2 заданием ещё проще, добавил поле в index.php, в пункте 5 добавляется проверка на тип билета и скидка или не скидка
7) С тем, что на один заказ несколько баркодов, сделал дополнительную таблицу barcodes_group, в которой есть столбец barcode_main - первичный ключ по ордеру, к нему привязывается такое количество баркодов, которое есть в заказе
8) По сути у каждого заказа есть свой barcode (уникальный) и для каждого заказа есть ещё n(количество билетов) баркодов по конкретно этому заказу
9) Само задание заняло 3 - 4 часа из - за желания сделать всё максимально автоматизированно и похоже на настоящий проект, а по факту лишь затруднить, само задание несложное, пришлось подумать пару раз
